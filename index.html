<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: black;
      }
      svg {
        width: 300px;
        height: auto;
        image-rendering: pixelated;
      }
    </style>
  </head>
  <body>
    <!-- Pixel-Perfect SVG Art -->
    <svg id="pixelArt" viewBox="0 0 75 85">
      <!-- Character (static part) -->
      <g id="character">
        <!-- Insert the pixel art rectangles here (from the SVG conversion) -->
      </g>

      <!-- Dynamic Numbers -->
      <g id="blockNumbers" transform="translate(0, 70)"></g>
    </svg>

    <script>
      const numberPatterns = {
        '0': [
          [0,1,1,1,0],
          [1,0,0,0,1],
          [1,0,0,0,1],
          [1,0,0,0,1],
          [0,1,1,1,0]
        ],
        '1': [
          [0,0,1,0,0],
          [0,1,1,0,0],
          [0,0,1,0,0],
          [0,0,1,0,0],
          [1,1,1,1,1]
        ],
        '2': [
          [0,1,1,1,0],
          [0,0,0,0,1],
          [0,1,1,1,0],
          [1,0,0,0,0],
          [1,1,1,1,1]
        ],
        '3': [
          [1,1,1,1,0],
          [0,0,0,0,1],
          [0,1,1,1,0],
          [0,0,0,0,1],
          [1,1,1,1,0]
        ],
        '4': [
          [1,0,0,1,0],
          [1,0,0,1,0],
          [1,1,1,1,1],
          [0,0,0,1,0],
          [0,0,0,1,0]
        ],
        '5': [
          [1,1,1,1,1],
          [1,0,0,0,0],
          [1,1,1,1,0],
          [0,0,0,0,1],
          [1,1,1,1,0]
        ],
        '6': [
          [0,1,1,1,0],
          [1,0,0,0,0],
          [1,1,1,1,0],
          [1,0,0,0,1],
          [0,1,1,1,0]
        ],
        '7': [
          [1,1,1,1,1],
          [0,0,0,0,1],
          [0,0,0,1,0],
          [0,0,1,0,0],
          [0,0,1,0,0]
        ],
        '8': [
          [0,1,1,1,0],
          [1,0,0,0,1],
          [0,1,1,1,0],
          [1,0,0,0,1],
          [0,1,1,1,0]
        ],
        '9': [
          [0,1,1,1,0],
          [1,0,0,0,1],
          [0,1,1,1,1],
          [0,0,0,0,1],
          [0,1,1,1,0]
        ]
      };

      async function fetchBlockHeight() {
        try {
          const response = await fetch('https://blockchain.info/q/getblockcount'); // Public API for block height
          if (response.ok) {
            const blockHeight = await response.text();
            displayBlockHeight(blockHeight.trim());
          } else {
            console.error('Failed to fetch block height, response not OK');
          }
        } catch (error) {
          console.error('Failed to fetch block height:', error);
        }
      }

      function displayBlockHeight(height) {
        const blockNumbersGroup = document.getElementById('blockNumbers');
        blockNumbersGroup.innerHTML = ''; // Clear previous numbers

        const pixelSize = 2; // Adjust for pixel-perfect sizing
        const digitWidth = 5 * pixelSize; // Each digit is 5 pixels wide
        const spacing = pixelSize; // Space between digits

        const totalWidth = (digitWidth + spacing) * height.length - spacing;
        const startX = (75 - totalWidth) / 2; // Center the numbers horizontally

        let xOffset = startX;

        height.split('').forEach(digit => {
          const pattern = numberPatterns[digit];
          pattern.forEach((row, y) => {
            row.forEach((cell, x) => {
              if (cell) {
                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                rect.setAttribute('x', xOffset + x * pixelSize);
                rect.setAttribute('y', y * pixelSize);
                rect.setAttribute('width', pixelSize);
                rect.setAttribute('height', pixelSize);
                rect.setAttribute('fill', 'black');
                blockNumbersGroup.appendChild(rect);
              }
            });
          });
          xOffset += digitWidth + spacing;
        });
      }

      fetchBlockHeight();
      setInterval(fetchBlockHeight, 60000); // Update every minute
    </script>
  </body>
</html>
